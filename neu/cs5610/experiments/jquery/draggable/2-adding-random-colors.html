<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Random Color Draggables</title>
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <link rel="stylesheet" type="text/css" href="../css/smoothness/jquery-ui.min.css" />
    <script src="../js/jquery.js"></script>
    <script src="../js/jquery-ui.min.js"></script>
    <script>
        $(function () {
            $("#add").click(addAnotherBlock);
        });
        
        function addAnotherBlock() {
        	var randomBackgroundColor = getRandomColor();
        	$("<div class='h100 w100 fleft'>")
        		.css("background-color", randomBackgroundColor)
        		.dblclick(clickHandler)
        		.draggable()
        		.appendTo("#canvas");
        }
        
		function getRandomColor() {
			var letters = '0123456789ABCDEF'.split('');
			var color = '#';
			for(var i = 0; i < 6; i++ ) {
				color += letters[Math.round(Math.random() * 15)];
			}
			return color;
		}
		
		function clickHandler() {
			var target = $(this);
			var color = target.css("background-color");
			var position = target.offset();
			var x = position.left;
			var y = position.top;
			var message = "Color: " + color + "\n" + "X: " + x + "\n" + "Y: " + y;
			alert(message);
		}
    </script>
</head>
<body>
    <div class="ninesixty">
	    <h1>Adding Random Colored Draggables</h1>
	    <p>This example shows how to use jQuery's to add draggable blocks with a random color. Consider the link below:</p>
    	<a href="#" id="add">Add Another Block</a>
    	<div id="canvas" class="borderblack">&nbsp;</div>
    	<div class="clear">&nbsp;</div>
    	<p>	Click on the Add Another Block link above and notice how it adds more and more blocks from top to bottom and left to right.
    		The blocks are of random colors. Try dragging the new blocks. Nice. The link's html is as you would expect. We are giving it the id 'add' so we can grab it with jQuery:
    	</p>
    	<pre>
	&lt;a href=&quot;#&quot; id=&quot;add&quot;&gt;Add Another Block&lt;/a&gt;    		
    	</pre>
    	<p>	We grab the link from its ID and assign it a click handler as follows:</p>
    	<pre>
	$(function () {
	    $("#add").click(addAnotherBlock);            
	});    		
    	</pre>
    	<p>	The event handler dynamically creates a DIV block content, makes draggable, and adds it to a DIV called canvas
    	</p>
    	<pre>
	function addAnotherBlock() {
		$(&quot;&lt;div class=&#39;h100 w100 redbg fleft&#39;&gt;&quot;)
			.css("background-color", randomBackgroundColor)
			.dblclick(clickHandler)
			.draggable()
			.appendTo(&quot;#canvas&quot;);
	}
    	</pre>
    	<p>	The random colors are created using the following function:</p>
    	<pre>
	function getRandomColor() {
		var letters = &#39;0123456789ABCDEF&#39;.split(&#39;&#39;);
		var color = &#39;#&#39;;
		for (var i = 0; i &lt; 6; i++ ) {
			color += letters[Math.round(Math.random() * 15)];
		}
		return color;
	}
    	</pre>
    	<p> Notice that we have added a double click event handler to each new DIV using the jQuery function dblclick(clickHandler).
    		This means that if you double click on any of the DIVs, the clickHandler() method will be called.
    	</p>
    	<pre>
	function clickHandler() {
		var target = $(this);
		var color = target.css("background-color");
		var position = target.offset();
		var x = position.left;
		var y = position.top;
		var message = "Color: " + color + "\n" + "X: " + x + "\n" + "Y: " + y;
		alert(message);
	}
    	</pre>
    	<p>
    		The handler grabs the target element that generated the event, retrieves its background color style, x and y offset, and displays it in a popup.
    		Notice that we are adding a new handler on each DIV as they are created.
    	</p>
    	
    	<a href="../../fileview/Default.aspx?~/jquery/draggable/2-adding-random-colors.html" target="_blank">View Source</a>
    </div>
</body>
</html>
