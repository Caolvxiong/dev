<!DOCTYPE html>
<html>
<head>
<title>Section Table</title>
</head>

<link href="css/style.css" type="text/css" rel="stylesheet"/>
<script src="../js/jquery-1.10.2.min.js"></script>

<body>

<header>
	<h1>Section Table</h1>
	<time pubdate datetime="2013-09-07"/>
</header>

    <nav>
        <a href="0-store.html">Store</a> |
        <a href="1-summary.0.html">Summary</a> |
        <a href="2-summary.html">Application Rows</a> |
        <a href="3-section.html">Section</a> |
        <a href="4-sectionTable.html">Section Table</a> |
        <a href="5-sectionDynamic.html">Section Dynamic</a> |
        <a href="6-appEditor.html">App Editor</a> |
        <a href="7-appStorage.html">App Save</a> |
        <a href="8-appLoad.html">App Load</a> |
    </nav>

<section class="main-container">
	<article>
		<header>
			<h1>Titled Container</h1>
		</header>
		<section class="radius10 borderGray borderSolid border1px arial">
			<header class="radiusTop10 lightgrayBg padding10 borderBottom1px borderGray borderSolid">
				<h1 class="noMargin floatLeft">New and Worthy</h1>
				<a href="#" class="marginLeft10">See All &gt;</a>
			</header>
			<p class="padding10">Content</p>
		</section>
	</article>
	<article>
		<header>
			<h1>Container with Content</h1>
		</header>
		<section class="container radius10 borderGray borderSolid border1px arial">
			<header class="radiusTop10 lightgrayBg padding10 borderBottom1px borderGray borderSolid">
				<h1 class="title noMargin floatLeft">New and Worthy</h1>
				<a href="#" class="marginLeft10">See All &gt;</a>
			</header>

			<div>
				<table class="table" border=1 width="100%" style="margin-bottom:10px">
					<tr class="row">
						<td class="col">
							<div class="app summary arial padding10 width260">
								<img src="images/app1Small.png" class="icon"/>
								<header>	<h1 class="name header noMargin">Contact List</h1></header>
								<span class="category">Utilities</span>
								<div>
									<span class="stars good orange">&#10029; &#10029; &#10029;</span>
									<span class="stars bad  lightgray">&#10029; &#10029;</span>
									<span class="rating">957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>
						</td>
						<td>
							<div class="app summary arial padding10 width260">
								<img src="images/app2Small.png" class="icon"/>
								<header>	<h1 class="header noMargin">Contact List</h1></header>
								<span>Utilities</span>
								<div>
									<span class="orange">&#10029; &#10029; &#10029;</span>
									<span class="lightgray">&#10029; &#10029;</span>
									<span>957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>
						</td>
						<td>
							<div class="app summary arial padding10 width260">
								<img src="images/app3Small.png" class="icon"/>
								<header>	<h1 class="header noMargin">Contact List</h1></header>
								<span>Utilities</span>
								<div>
									<span class="orange">&#10029; &#10029; &#10029;</span>
									<span class="lightgray">&#10029; &#10029;</span>
									<span>957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>
						</td>
					</tr>
					<tr class="lightgrayBg">
						<td>
							<div class="app summary arial padding10 width260">
								<img src="images/app2Small.png" class="icon"/>
								<header>	<h1 class="header noMargin">Contact List</h1></header>
								<span>Utilities</span>
								<div>
									<span class="orange">&#10029; &#10029; &#10029;</span>
									<span class="lightgray">&#10029; &#10029;</span>
									<span>957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>		
						</td>
						<td>
							<div class="app summary arial padding10 width260">
								<img src="images/app3Small.png" class="icon"/>
								<header>	<h1 class="header noMargin">Contact List</h1></header>
								<span>Utilities</span>
								<div>
									<span class="orange">&#10029; &#10029; &#10029;</span>
									<span class="lightgray">&#10029; &#10029;</span>
									<span>957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>
						</td>
						<td>					
							<div class="app summary arial padding10 width260">
								<img src="images/app1Small.png" class="icon"/>
								<header>	<h1 class="header noMargin">Contact List</h1></header>
								<span>Utilities</span>
								<div>
									<span class="orange">&#10029; &#10029; &#10029;</span>
									<span class="lightgray">&#10029; &#10029;</span>
									<span>957</span> Ratings<br/>
									<a class="grayBg radius10 noTextDecoration white priceLink" href="#">$9.99</a>
									<select class="relativePosition share">
										<option>Copy Link</option>
										<option>Tell a Friend</option>
										<option>Share on Twitter</option>
										<option>Share to Facebook</option>
										<option>Share in Messages</option>
									</select>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</div>
		</section>
	</article>
</section>

<footer>
	
</footer>

<script>

	/*
	 * Grab static template DOM
	 */
	var mainContainer = $(".main-container");
	var appContainerTemplate = $(".container").clone();
	var tableTemplate = $(".container .table").clone();
	var rowTemplate = $(".container .table .row").clone();
	var colTemplate = $(".container .table .row .col").clone();

	/*
	 * Copy an entire template, change its title, and add it
	 */	
	var appContainerCopy1 = appContainerTemplate.clone();
	appContainerCopy1
		.find(".title")
		.html("App Container Template Copy");
	
	mainContainer.append(appContainerCopy1);

	/*
	 * Copy a table row template and add several copies
	 */
	
	// make a copy of the table template
	// and remove any existing content
	// to replace the rows with new copies
	var tableCopy2 = tableTemplate.clone();
	tableCopy2.find("tbody").empty();
	
	// make 4 copies of the row template
	var rowCopy1 = rowTemplate.clone();
	var rowCopy2 = rowTemplate.clone();
	var rowCopy3 = rowTemplate.clone();
	var rowCopy4 = rowTemplate.clone();
	
	// add the 4 row copies
	tableCopy2.find("tbody").append(rowCopy1);
	tableCopy2.find("tbody").append(rowCopy2);
	tableCopy2.find("tbody").append(rowCopy3);
	tableCopy2.find("tbody").append(rowCopy4);
	
	// copy the container template
	// and remove the table it has
	// to replace it with the new table copy
	var appContainerCopy2 = appContainerTemplate.clone();
	appContainerCopy2.find(".table").remove();	
	appContainerCopy2.append(tableCopy2)	
	
	// change the container's title
	appContainerCopy2
		.find(".title")
		.html("Four Row Copies");

	mainContainer.append(appContainerCopy2);

	/*
	 * Data Driven
	 */

	// Data
	var sectionData = [
[
    { "name" : "Name", 			 "price" : 9.99,   "category" : "Category", 						"stars" : 2, "rating-count" : 200, "image" : "app2Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category",				"stars" : 3, "rating-count" : 100, "image" : "app1Small" },
    { "name" : "Name Name Name", "price" : 999.99, "category" : "Category Category Category",	"stars" : 4, "rating-count" : 300, "image" : "app3Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category", 			"stars" : 5, "rating-count" : 400, "image" : "app1Small" }
],
[
    { "name" : "Name", 			 "price" : 9.99,   "category" : "Category", 						"stars" : 2, "rating-count" : 200, "image" : "app2Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category",				"stars" : 3, "rating-count" : 100, "image" : "app1Small" },
    { "name" : "Name Name Name", "price" : 999.99, "category" : "Category Category Category",	"stars" : 4, "rating-count" : 300, "image" : "app3Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category", 			"stars" : 5, "rating-count" : 400, "image" : "app1Small" }
],
[
    { "name" : "Name", 			 "price" : 9.99,   "category" : "Category", 						"stars" : 2, "rating-count" : 200, "image" : "app2Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category",				"stars" : 3, "rating-count" : 100, "image" : "app1Small" },
    { "name" : "Name Name Name", "price" : 999.99, "category" : "Category Category Category",	"stars" : 4, "rating-count" : 300, "image" : "app3Small" },
    { "name" : "Name Name", 		 "price" : 99.99,  "category" : "Category Category", 			"stars" : 5, "rating-count" : 400, "image" : "app1Small" }
]
		];

	// Iterate over the data and print it
	for(var row=0; row<sectionData.length; row++) {
		var appSummaries = sectionData[row];
		for(var col=0; col<appSummaries.length; col++) {
			var appData = appSummaries[col];
			console.log(appData)
		}
	}

	// Constant array with entity character for stars
	var STARS = [
		"", // no stars
		"&#10029;", // 1 star
		"&#10029; &#10029;", // 2 stars
		"&#10029; &#10029; &#10029;", // 3 stars
		"&#10029; &#10029; &#10029; &#10029;", // 4 stars
		"&#10029; &#10029; &#10029; &#10029; &#10029;", // 5 stars
	];

	// Table clone
	var tableCopy3 = tableTemplate.clone();
	tableCopy3.find("tbody").empty();

	// Dynamically Create a Section
	for(var row=0; row<sectionData.length; row++) {
		// create a row copy for every data row
		var rowCopy = rowTemplate.clone();
		rowCopy.empty();
		var appSummaries = sectionData[row];
		for(var col=0; col<appSummaries.length; col++) {
			var colCopy = colTemplate.clone();
			var appData = appSummaries[col];
			colCopy.find(".name").html(appData.name);
			colCopy.find(".category").html(appData.category);
			colCopy.find(".priceLink").html(appData.price);
			colCopy.find(".rating").html(appData["rating-count"]);
			colCopy.find(".stars.good").html(STARS[appData.stars]);
			colCopy.find(".stars.bad").html(STARS[5-appData.stars]);
			colCopy.find(".icon").attr("src", "images/"+appData.image+".png");
			rowCopy.append(colCopy)
			console.log(appData);
		}
		tableCopy3.find("tbody").append(rowCopy)
	}

	var appContainerCopy3 = appContainerTemplate.clone();
	appContainerCopy3.find(".table").remove();	
	appContainerCopy3.append(tableCopy3)	
	
	// change the container's title
	appContainerCopy3
		.find(".title")
		.html("Dynamic");

	mainContainer.append(appContainerCopy3);


</script>

</body>
</html>